{"version":3,"sources":["composants/Entete.jsx","images/couverture.webp","composants/Dossier.jsx","firebase.js","composants/DossierVide.jsx","composants/ListeDossiers.jsx","composants/Accueil.jsx","composants/AjouterDossier.jsx","composants/Appli.jsx","index.jsx"],"names":["Entete","utilisateur","className","Button","variant","size","onClick","firebase","auth","signOut","displayName","Avatar","alt","src","photoURL","Dossier","id","nom","couleur","datemodif","couverture","useState","anchor","setAnchor","closeMenu","event","style","backgroundColor","IconButton","aria-label","disableRipple","CouvertureDefaut","formaterDate","currentTarget","Menu","anchorEl","keepMounted","open","Boolean","onClose","MenuItem","d","dateJs","Date","seconds","getDate","getMonth","getFullYear","apps","length","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","instanceFirebaseUI","firebaseui","AuthUI","firestore","DossierVide","props","ListeDossiers","etatDossiers","dossiers","setDossiers","useEffect","a","tabDossiers","collection","doc","uid","get","forEach","push","data","chercherDossiers","map","dossier","Accueil","start","signInOptions","GoogleAuthProvider","PROVIDER_ID","FacebookAuthProvider","GithubAuthProvider","signInFlow","AjouterDossier","ouvert","setOuvert","gererAjout","setNom","setCouverture","setCouleur","viderChamps","Dialog","aria-labelledby","DialogTitle","DialogContent","TextField","autoFocus","margin","label","type","fullWidth","onChange","e","target","value","defaultValue","width","triangle","onChangeComplete","hex","color","colors","DialogActions","padding","Appli","setUtilisateur","onAuthStateChanged","util","set","courriel","email","datecompte","FieldValue","serverTimestamp","merge","objDossier","signets","add","then","refDoc","Fab","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6711196a.chunk.js","sourcesContent":["import './Entete.scss';\r\nimport { Avatar } from '@material-ui/core'; \r\nimport Button from '@material-ui/core/Button';\r\nimport firebase from 'firebase/app';\r\n\r\nexport default function Entete({utilisateur}) {\r\n  return (\r\n    <header className=\"Entete\">\r\n      <div className=\"logo\">\r\n        Signets\r\n        <Button \r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          className=\"btn-deconnexion\"\r\n          onClick={() => firebase.auth().signOut()}\r\n        >\r\n          Déconnexion\r\n        </Button>\r\n      </div>\r\n      <div className=\"utilisateur\">{utilisateur.displayName} <Avatar className=\"avatar\" alt={utilisateur.displayName} src={utilisateur.photoURL} /></div>\r\n    </header>\r\n  );\r\n}","export default __webpack_public_path__ + \"static/media/couverture.2dc9ece9.webp\";","import './Dossier.scss'; \r\nimport { IconButton } from '@material-ui/core';\r\nimport SortIcon from '@material-ui/icons/Sort';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport { useState } from 'react';\r\nimport CouvertureDefaut from \"../images/couverture.webp\"\r\n\r\n\r\nexport default function Dossier({id, nom, couleur, datemodif, couverture}) {\r\n\r\n  const [anchor, setAnchor] = useState(null);\r\n  \r\n  const openMenu = (event) => {\r\n    setAnchor(event.currentTarget);\r\n  };\r\n\r\n  const closeMenu = (event) => {\r\n    setAnchor(null);\r\n  };\r\n\r\n  return (\r\n    <article className=\"Dossier\" style={{backgroundColor: couleur}}>\r\n      <div className=\"couverture\">\r\n        <IconButton  className=\"deplacer\" aria-label=\"déplacer\" disableRipple={true}>\r\n          <SortIcon></SortIcon>\r\n        </IconButton>\r\n        <img src={couverture ? couverture : CouvertureDefaut  } alt={nom}/>\r\n      </div>\r\n      <div className=\"info\">\r\n        <h2>{nom}</h2>\r\n        <p>Modifié : {formaterDate(datemodif)}</p>\r\n      </div>\r\n      <IconButton onClick={openMenu} className=\"modifier\" aria-label=\"modifier\" size=\"small\">\r\n        <MoreVertIcon />\r\n      </IconButton>\r\n      <Menu anchorEl={anchor} keepMounted open={Boolean(anchor)} onClose={closeMenu}>\r\n            <MenuItem onClick={closeMenu} >Modifier</MenuItem>\r\n            <MenuItem onClick={closeMenu}>Supprimer</MenuItem>\r\n      </Menu>\r\n    </article>\r\n  );\r\n}\r\n\r\n/**\r\n * Formate les objets date de Firestore et retourne une chaîne de caractères\r\n * @param {Object} d Objet date retourné par Firestore\r\n * @returns String date formatée en français\r\n */\r\nfunction formaterDate(d) {\r\n  const dateJs = d ? new Date(d.seconds*1000) : new Date();\r\n  const mois = ['janvier', 'février', 'mars', 'avril', 'mai', 'juin', 'juillet', 'août', 'septembre', 'octobre', 'novembre', 'décembre'];\r\n  return `${dateJs.getDate()} ${mois[dateJs.getMonth()]} ${dateJs.getFullYear()}`;\r\n}","import firebase from 'firebase/app';\r\nimport * as firebaseui from 'firebaseui';\r\nimport 'firebase/firestore';\r\n\r\n// Configuration (mettez-y les vôtres !)\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBqQRS8GaaRalAqeY3_-BLptJKi6GPMeig\",\r\n  authDomain: \"abdirahman-react.firebaseapp.com\",\r\n  projectId: \"abdirahman-react\",\r\n  storageBucket: \"abdirahman-react.appspot.com\",\r\n  messagingSenderId: \"302817357703\",\r\n  appId: \"1:302817357703:web:c5fdb45101a831a6d36d22\",\r\n  measurementId: \"G-RTLCMTBJJH\"\r\n};\r\n\r\n// Initialiser Firebase\r\nif(!firebase.apps.length) {\r\n  firebase.initializeApp(firebaseConfig);\r\n}\r\n\r\n// Initialiser FirebaseUI\r\nexport const instanceFirebaseUI = new firebaseui.auth.AuthUI(firebase.auth());\r\n\r\n// Initialiser Firestore\r\nexport const firestore = firebase.firestore();\r\n","import './DossierVide.scss'; \r\n\r\n\r\nexport default function DossierVide(props) {\r\n  return (\r\n    <article className=\"DossierVide\">\r\n      <div className=\"couverture\">\r\n\r\n      </div>\r\n      <div className=\"info\">\r\n        <h2>Votre liste de dossiers est vide</h2>\r\n        <p>;-(</p>\r\n      </div>\r\n    \r\n    </article>\r\n  );\r\n}","import './ListeDossiers.scss';\r\nimport Dossier from './Dossier';\r\nimport { firestore } from '../firebase';\r\nimport { useEffect, useState } from 'react';\r\nimport DossierVide from \"./DossierVide\";\r\n\r\nexport default function ListeDossiers({ utilisateur, etatDossiers }) {\r\n  // État des dossiers (notez que cet état est défini dans le composant parent \"Appli\", et passé ici dans les props)\r\n  const [dossiers, setDossiers] = etatDossiers;\r\n  useEffect(\r\n    () => {\r\n      // On crée une fonction asynchrone pour pouvoir utiliser la syntaxe await sur les requêtes asynchrones à Firestore\r\n      async function chercherDossiers() {\r\n        // Tableau qui va recevoir nos dossiers de Firestore\r\n        const tabDossiers = [];\r\n        // La requête à Firestore utilise 'await' pour retourner la réponse\r\n        const reponse = await firestore.collection('utilisateurs-ex4').doc(utilisateur.uid).collection('dossiers').get();\r\n        // On traverse la réponse ...\r\n        reponse.forEach(\r\n          // ... et pour chaque doc dans la réponse on ajoute un objet dans tabDossiers\r\n          doc => {\r\n            tabDossiers.push({ id: doc.id, ...doc.data() })\r\n          }\r\n          // Remarquez que le 'id' ne fait pas partie des attributs de données des documents sur Firestore, et il faut l'extraire séparément avec la propriété 'id'. Remarquez aussi l'utilisation de l'opérateur de décomposition (spread operator (...))\r\n        );\r\n        // Une fois notre réponse traitée au complet et le tableau tabDossiers renpli avec tous les objets représentants les documents 'dossiers' trouvés, nous pouvons faire la mutation de l'état de la variable 'dossiers' (en utilisant le mutateur setDossiers) pour forcer un 'rerender' (réaffichage) du composant par React\r\n        setDossiers(tabDossiers);\r\n      }\r\n      // Faut pas oublier d'appeler la fonction\r\n      chercherDossiers();\r\n    }, []\r\n  );\r\n\r\n  return (\r\n    <ul className=\"ListeDossiers\">\r\n      {\r\n        dossiers.length > 0 ?\r\n          dossiers.map(\r\n            dossier => <li key={dossier.id}><Dossier {...dossier} /></li>\r\n          )\r\n          // Sinon :\r\n          :\r\n          <DossierVide />\r\n      }\r\n    </ul>\r\n  );\r\n}\r\n","import './Accueil.scss';\r\nimport firebase from 'firebase/app';\r\nimport { instanceFirebaseUI } from '../firebase';\r\nimport 'firebaseui/dist/firebaseui.css';\r\nimport { useEffect } from 'react';\r\n\r\nexport default function Accueil() {\r\n  useEffect(\r\n    () => instanceFirebaseUI.start(\"#firebaseui-widget\", {\r\n      signInOptions: [\r\n        firebase.auth.GoogleAuthProvider.PROVIDER_ID,\r\n        firebase.auth.FacebookAuthProvider.PROVIDER_ID,\r\n        firebase.auth.GithubAuthProvider.PROVIDER_ID\r\n      ],\r\n      signInFlow: 'popup'\r\n    }, [])\r\n  )\r\n\r\n  return (\r\n    <div className=\"Accueil\">\r\n      <h3 className=\"logo\">Signets <span>beta</span></h3>\r\n      <h2 className=\"amorce\">Organisez vos signets Web, <br />Simple comme bonjour !</h2>\r\n      <h4 className=\"connexion-etiquette\">Connexion à Signets</h4>\r\n      <div id=\"firebaseui-widget\"></div>\r\n    </div>\r\n  )\r\n}","import Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { useState } from 'react';\r\nimport { TwitterPicker } from 'react-color';\r\n\r\nimport \"./AjouterDossier.scss\";\r\n\r\nexport default function AjouterDossier({ouvert, setOuvert, gererAjout}) {\r\n  const [nom, setNom] = useState('');\r\n  const [couverture, setCouverture] = useState('');\r\n  const [couleur, setCouleur] = useState('#532169');\r\n\r\n  const couleursParDefaut = [\"#5D2B7D\",\"#A72D89\",\"#1474BB\",\"#8FC33E\",\"#FEEE22\",\"#E41E26\"];\r\n\r\n  function viderChamps() {\r\n    setNom('');\r\n    setCouverture('');\r\n    setCouleur('#537169');\r\n  }\r\n\r\n  return (\r\n    <div className=\"AjouterDossier\">\r\n      <Dialog open={ouvert} onClose={()=>setOuvert(false)} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">Ajouter un dossier</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"normal\"\r\n            id=\"nomDossier\"\r\n            label=\"Nom du dossier\"\r\n            type=\"text\"\r\n            fullWidth\r\n            onChange={(e) => setNom(e.target.value)}\r\n            defaultValue={nom}\r\n          />\r\n          <TextField\r\n            margin=\"normal\"\r\n            id=\"urlImage\"\r\n            label=\"Adresse de l'image de couverture\"\r\n            type=\"text\"\r\n            fullWidth\r\n            onChange={(e) => setCouverture(e.target.value)}\r\n            defaultValue={couverture}\r\n          />\r\n          <TwitterPicker \r\n            width=\"100%\" \r\n            triangle=\"hide\" \r\n            onChangeComplete={(couleur, e) => setCouleur(couleur.hex)}\r\n            color={couleur}\r\n            colors={couleursParDefaut} //Verts, jaunes, orange, brun, rouge bleu\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={()=>{setOuvert(false); viderChamps()}} color=\"primary\" style={{color:\"white\",backgroundColor:\"darkred\", padding:\"7px 15px\", margin:\"10px\"}}>\r\n            Annuler\r\n          </Button>\r\n          <Button onClick={() => {nom !== '' && gererAjout(nom, couverture, couleur); viderChamps(); }} color=\"primary\" style={{color:\"white\",backgroundColor:\"green\",padding:\"7px 15px\", margin:\"10px\"}}>\r\n            Ajouter\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}","import './Appli.scss';\r\nimport Entete from './Entete';\r\nimport ListeDossiers from './ListeDossiers';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Accueil from './Accueil';\r\nimport { useEffect, useState } from 'react';\r\nimport firebase from 'firebase/app';\r\nimport {firestore} from '../firebase';\r\nimport AjouterDossier from './AjouterDossier';\r\n\r\nexport default function Appli() {\r\n  // État de l'utilisateur\r\n  const [utilisateur, setUtilisateur] = useState(null);\r\n\r\n  // État des dossiers\r\n  const etatDossiers = useState([]);\r\n  const [dossiers, setDossiers] = etatDossiers;\r\n\r\n  // État de la boîte de dialogue \"Ajout Dossier\"\r\n  const [ouvert, setOuvert] = useState(false);\r\n\r\n  // Valider la connexion utilisateur\r\n  useEffect(\r\n    () => {\r\n     firebase.auth().onAuthStateChanged(\r\n       util => {\r\n        setUtilisateur(util);\r\n        // Créer le profil de l'utilisateur dans Firestore si util n'est pas NULL\r\n        if(util) {\r\n          firestore.collection('utilisateurs-ex4').doc(util.uid).set({\r\n            nom: util.displayName, \r\n            courriel: util.email, \r\n            datecompte: firebase.firestore.FieldValue.serverTimestamp()\r\n          }, {merge: true});\r\n        }\r\n      }\r\n     );\r\n    }, []\r\n  );\r\n  \r\n  // Ajouter un dossier\r\n  function gererAjout(nom, couverture, couleur) {\r\n    // Objet à ajouter dans la collection \"dossiers\" sur Firestore\r\n    const objDossier = {\r\n      nom: nom,\r\n      couverture: couverture,\r\n      couleur: couleur,\r\n      datemodif: firebase.firestore.FieldValue.serverTimestamp(),\r\n      signets: []\r\n    };\r\n    // Ajout de l'objet\r\n    firestore.collection('utilisateurs-ex4').doc(utilisateur.uid).collection('dossiers').add(objDossier).then(\r\n      refDoc => {\r\n        // Puis on utilise la référence retournée pour chercher le détail du dossier\r\n        refDoc.get().then(\r\n          // Et on modifie l'état des dossiers en joignant ce dernier pour forcer un \"rerender\" du composant \"ListeDossiers\"\r\n          doc => setDossiers([...dossiers, {...doc.data(), id: doc.id}])\r\n        );\r\n        // On oublie pas de fermer la boîte de dialogue\r\n        setOuvert(false);\r\n      }\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"Appli\">\r\n      {\r\n        // Un utilisateur est connecté ?\r\n        utilisateur ?\r\n          <>\r\n            <Entete utilisateur={utilisateur} />\r\n            <section className=\"contenu-principal\">\r\n              <ListeDossiers utilisateur={utilisateur} etatDossiers={etatDossiers} />\r\n              <AjouterDossier ouvert={ouvert} setOuvert={setOuvert} gererAjout={gererAjout} />\r\n              <Fab onClick={() => setOuvert(true)} className=\"ajoutRessource\" color=\"primary\" aria-label=\"Ajouter dossier\">\r\n                <AddIcon />\r\n              </Fab>\r\n            </section>\r\n          </>\r\n        // Sinon :\r\n        :\r\n          <Accueil />\r\n      }\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport Appli from './composants/Appli';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Appli />\r\n  </React.StrictMode>,\r\n  document.getElementById('racine')\r\n);\r\n"],"sourceRoot":""}